<!doctype html>
<html lang="ru">
    <head>
        <meta charset="UTF-8" />
        <title>Стилизация iframe через CSS</title>
        <link rel="stylesheet" href="style.css" />
        <style>
            .sticky-back {
                position: fixed;
                top: 20px;
                left: 20px;
                z-index: 1000;
            }
            .editor {
                width: 100%;
                min-height: 60px;
                font-family: Consolas, monospace;
                font-size: 1em;
                margin-top: 10px;
                margin-bottom: 10px;
                background: #f4f4f4;
                border: 1px solid #ccc;
                border-radius: 6px;
                padding: 8px;
                resize: vertical;
            }
            .form-row {
                display: flex;
                gap: 1em;
                margin-bottom: 1em;
                flex-wrap: wrap;
            }
            .form-row label {
                font-weight: bold;
            }
            .form-row input[type='number'] {
                width: 90px;
                padding: 4px 8px;
                border-radius: 4px;
                border: 1px solid #ccc;
            }
            .form-row input[type='color'] {
                width: 40px;
                height: 32px;
                border: none;
                background: none;
                padding: 0;
            }
            .form-row select {
                padding: 4px 8px;
                border-radius: 4px;
                border: 1px solid #ccc;
            }
            .form-row input[type='checkbox'] {
                margin-right: 4px;
            }
            .form-row button {
                padding: 6px 18px;
                border-radius: 4px;
                border: none;
                background: #1976d2;
                color: #fff;
                font-weight: bold;
                cursor: pointer;
                transition: background 0.2s;
            }
            .form-row button:hover {
                background: #1251a3;
            }
            .styled-iframe.hover-anim {
                transition:
                    box-shadow 0.3s,
                    border-radius 0.3s;
            }
        </style>
    </head>
    <body>
        <a href="../index.html" class="sticky-back">← На главную</a>
        <h1>Стилизация контейнера &lt;iframe&gt; через CSS</h1>
        <div class="example">
            <b>Быстрый выбор:</b>
            <form id="cssForm" onsubmit="return false;">
                <div class="form-row">
                    <label><input type="checkbox" id="radius" checked />Скругление</label>
                    <label><input type="checkbox" id="shadow" checked />Тень</label>
                    <label>Ширина: <input type="number" id="width" value="70" />%</label>
                    <label>Высота: <input type="number" id="height" value="400" />px</label>
                </div>
                <div class="form-row">
                    <label
                        >Граница:
                        <input type="color" id="borderColor" value="#cccccc" />
                        <input
                            type="number"
                            id="borderWidth"
                            value="1"
                            min="0"
                            max="20"
                            style="width: 50px"
                        />px
                        <select id="borderStyle">
                            <option value="solid">сплошная</option>
                            <option value="dashed">пунктир</option>
                            <option value="dotted">точки</option>
                            <option value="double">двойная</option>
                            <option value="none">нет</option>
                        </select>
                    </label>
                    <label>Margin: <input type="number" id="margin" value="0" />px</label>
                    <label>Фон: <input type="color" id="bgColor" value="#ffffff" /></label>
                </div>
                <div class="form-row">
                    <label
                        >Фильтр:
                        <select id="filter">
                            <option value="none">нет</option>
                            <option value="grayscale(1)">grayscale</option>
                            <option value="blur(2px)">blur</option>
                        </select>
                    </label>
                    <label><input type="checkbox" id="hoverAnim" />Анимация наведения</label>
                    <button id="applyBtn">Показать</button>
                </div>
            </form>
            <iframe
                id="mapFrame"
                class="styled-iframe"
                src="https://yandex.ru/map-widget/v1/?ll=37.617600%2C55.755800&z=10&l=map"
            ></iframe>
            <textarea id="codeEditor" class="editor" rows="12">
&lt;iframe class="styled-iframe" src="https://yandex.ru/map-widget/v1/?ll=37.617600%2C55.755800&amp;z=10&amp;l=map"&gt;&lt;/iframe&gt;

.styled-iframe {
  width: 70%;
  height: 400px;
  border-radius: 20px;
  box-shadow: 0 4px 24px rgba(0,0,0,0.15);
  border: 1px solid #ccc;
  margin: 0;
  background: #fff;
  filter: none;
}
</textarea
            >
        </div>
        <script>
            const frame = document.getElementById('mapFrame');
            const editor = document.getElementById('codeEditor');
            const form = document.getElementById('cssForm');
            const radius = document.getElementById('radius');
            const shadow = document.getElementById('shadow');
            const width = document.getElementById('width');
            const height = document.getElementById('height');
            const borderColor = document.getElementById('borderColor');
            const borderWidth = document.getElementById('borderWidth');
            const borderStyle = document.getElementById('borderStyle');
            const margin = document.getElementById('margin');
            const bgColor = document.getElementById('bgColor');
            const filter = document.getElementById('filter');
            const hoverAnim = document.getElementById('hoverAnim');
            function updateCSSByForm() {
                let style = '';
                style += `width: ${width.value}%;\n`;
                style += `height: ${height.value}px;\n`;
                style += radius.checked ? 'border-radius: 20px;\n' : 'border-radius: 0;\n';
                style += shadow.checked
                    ? 'box-shadow: 0 4px 24px rgba(0,0,0,0.15);\n'
                    : 'box-shadow: none;\n';
                style += `border: ${borderWidth.value}px ${borderStyle.value} ${borderColor.value};\n`;
                style += `margin: ${margin.value}px;\n`;
                style += `background: ${bgColor.value};\n`;
                style += `filter: ${filter.value};`;
                frame.style.width = width.value + '%';
                frame.style.height = height.value + 'px';
                frame.style.borderRadius = radius.checked ? '20px' : '0';
                frame.style.boxShadow = shadow.checked ? '0 4px 24px rgba(0,0,0,0.15)' : 'none';
                frame.style.border = `${borderWidth.value}px ${borderStyle.value} ${borderColor.value}`;
                frame.style.margin = margin.value + 'px';
                frame.style.background = bgColor.value;
                frame.style.filter = filter.value;
                if (hoverAnim.checked) {
                    frame.classList.add('hover-anim');
                    frame.onmouseenter = () => {
                        frame.style.boxShadow = '0 8px 32px rgba(0,0,0,0.25)';
                        frame.style.borderRadius = '40px';
                    };
                    frame.onmouseleave = () => {
                        frame.style.boxShadow = shadow.checked
                            ? '0 4px 24px rgba(0,0,0,0.15)'
                            : 'none';
                        frame.style.borderRadius = radius.checked ? '20px' : '0';
                    };
                } else {
                    frame.classList.remove('hover-anim');
                    frame.onmouseenter = null;
                    frame.onmouseleave = null;
                }
                editor.value = `<iframe class=\"styled-iframe\" src=\"https://yandex.ru/map-widget/v1/?ll=37.617600%2C55.755800&amp;z=10&amp;l=map\"></iframe>\n\n.styled-iframe {\n${style}\n}`;
            }
            form.addEventListener('submit', updateCSSByForm);
            [
                radius,
                shadow,
                width,
                height,
                borderColor,
                borderWidth,
                borderStyle,
                margin,
                bgColor,
                filter,
                hoverAnim,
            ].forEach((input) => input.addEventListener('change', updateCSSByForm));
            editor.addEventListener('input', function () {
                const match = editor.value.match(/src=\"([^\"]+)/);
                if (match) {
                    frame.src = match[1].replace(/&amp;/g, '&');
                }
            });
        </script>
    </body>
</html>
